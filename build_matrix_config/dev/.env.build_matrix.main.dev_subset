# =================================================================================================
#
# DN configuration for dev
#
# Usage:
#   Execute PyCharm run config -> "[DEV] run › dn_build_all.bash (terminal window | context)"
#
# =================================================================================================

#
# Project repository version
#
# Notes:
# - 'latest' is the latest push to the repository default branch
# - 'bleeding' is the latest push to the repository dev branch (i.e. bleeding-edge)
# - 'hot' is the latest push to any repository feature branches. Its a workaround for working with
#    multi-arch/multi-compile-file build without requiring a local/custom registry.
NBS_MATRIX_REPOSITORY_VERSIONS=('hot')

#
# Dockerized-NorLab supported OS
#
NBS_MATRIX_SUPPORTED_OS=()
NBS_MATRIX_SUPPORTED_OS+=('l4t')
#NBS_MATRIX_SUPPORTED_OS+=('ubuntu')

#
# Linux-for-Tegra (L4T) supported versions
# Only crawled if 'l4t' ∈ NBS_MATRIX_SUPPORTED_OS
#
NBS_MATRIX_L4T_SUPPORTED_VERSIONS=()
NBS_MATRIX_L4T_SUPPORTED_VERSIONS+=('r36.4.0')
#NBS_MATRIX_L4T_SUPPORTED_VERSIONS+=('r36.2.0')
#NBS_MATRIX_L4T_SUPPORTED_VERSIONS+=('r35.4.1')
## Be advised (!):
##  - L4T container tags (e.g. r35.2.1) should match the L4T version on the Jetson otherwize cuda driver
##    won't be accessible (ref https://github.com/dusty-nv/jetson-containers#pre-built-container-images)
#
# References:
# - dusty-nv/jetson-containers: https://github.com/dusty-nv/jetson-containers
# - NVIDIA Container Runtime on Jetson: https://github.com/NVIDIA/nvidia-container-toolkit
# - JETPACK & L4T release version: https://developer.nvidia.com/embedded/jetpack-archive and https://www.stereolabs.com/blog/nvidia-jetson-l4t-and-jetpack-support/
#       - Jetpack 6.2.1   ›  L4T 36.4.4
#       - Jetpack 6.2     ›  L4T 36.4.3
#       - Jetpack 6.1     ›  L4T 36.4    ›  tag: r36.4.0
#       - Jetpack 6.0     ›  L4T 36.3
#       - Jetpack 6.0 DP  ›  L4T 36.2    ›  tag: r36.2.0
#       - Jetpack 5.1.3   ›  L4T 35.5.0  ›  tag: r35.5.0
#       - Jetpack 5.1.2   ›  L4T 35.4.1  ›  tag: r35.4.1
#       - Jetpack 5.1.1   ›  L4T 35.3.1  ›  tag: r35.3.1
#       - Jetpack 5.1     ›  L4T 35.2.1  ›  tag: r35.2.1
#       - Jetpack 4.6.1   ›  L4T 32.7.1  ›  tag: r32.7.1
#

#
# ubuntu supported versions
# Only crawled if 'ubuntu' ∈ NBS_MATRIX_SUPPORTED_OS
#
# References:
#   - Ubuntu release: https://ubuntu.com/about/release-cycle
#   - bionic=18.04 focal=20.04 jammy=22.04 noble=24.04
#
NBS_MATRIX_UBUNTU_SUPPORTED_VERSIONS=()
#NBS_MATRIX_UBUNTU_SUPPORTED_VERSIONS+=('focal')
#NBS_MATRIX_UBUNTU_SUPPORTED_VERSIONS+=('jammy')
#NBS_MATRIX_UBUNTU_SUPPORTED_VERSIONS+=('noble')

#
# ROS supported versions
#
NBS_MATRIX_ROS_DISTRO=()
#NBS_MATRIX_ROS_DISTRO+=('foxy')
NBS_MATRIX_ROS_DISTRO+=('galactic')
NBS_MATRIX_ROS_DISTRO+=('humble')

NBS_MATRIX_ROS_PKG=()
#NBS_MATRIX_ROS_PKG+=('ros-core')
NBS_MATRIX_ROS_PKG+=('ros-base')
#NBS_MATRIX_ROS_PKG+=('desktop')
#NBS_MATRIX_ROS_PKG+=('ros1-bridge')

#
# Specialized .env.build_matrix definition
#
NBS_DOTENV_BUILD_MATRIX_ARRAY=()

# (☕MINOR) ToDo: implement vaul related images >> next bloc ↓↓
#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.base-images.ubuntu_cuda')

#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.base-images.l4t-squash')
#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.base-images.ros2')
NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-dependencies')

# (NICE TO HAVE) ToDo: implement vaul related images >> next bloc ↓↓
#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.base-images.ros2-vaul')
#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-dependencies-vaul')

NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-control')
NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-control-deep')
NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-project')

# (CRITICAL) ToDo: Keep muted until LPM is fixed (ref task NMO-716)
#NBS_DOTENV_BUILD_MATRIX_ARRAY+=('prod/.env.build_matrix.dn-perception')

# ....Docker related...............................................................................
#DOCKER_CONTEXT=norlab-teamcity-server-daemon
#BUILDX_BUILDER=norlab-teamcity-server-daemon
#BUILDKIT_PROGRESS=plain
